# DB設計

## 概要

* 本ボットで使用するデータベースの構造と仕様をまとめる
* なおRDBには、現段階ではアクセス量が限定的であることからデータの移行が容易なSQLiteを使用するものとする

## DB一覧

* [ボイチャ支援DB](#ボイチャ支援db)
* レベル管理DB(TBD)


## DB仕様

### ボイチャ支援DB

#### 要求

* ボイスチャットの参加通知等を行うチャンネルが指定できる

#### テーブル一覧

##### サーバーテーブル m_servers

* 参加しているサーバー一覧を管理するテーブル

| 論理名       | 物理名        | データ型 | オプション | 備考            |
| :----------- | :------------ | :------- | :--------- | --------------- |
| ID           | id            | INTEGER  | PK         |                 |
| サーバー実ID | guild_real_id | TEXT     | Not Null   | Discordから取得 |

##### 通知テーブル m_notify_channels

* ボイスチャンネルが通知するテキストチャンネルを管理するテーブル
* サーバー実IDを直接設定するとデータサイズが肥大化すると判断したため外部キーとしている

| 論理名               | 物理名    | データ型 | オプション                 | 備考            |
| :------------------- | :-------- | :------- | :------------------------- | :-------------- |
| ボイスチャンネルID   | voice_id  | TEXT     | PK                         | Discordから取得 |
| テキストチャンネルID | text_id   | TEXT     | Not Null                   | Discordから取得 |
| サーバーID           | server_id | INTEGER  | Not Null, FK(m_servers.id) | 外部キー        |
| 通知ON/OFF           | is_notify | INTEGER  | DEFAULT:1                  | 0(および1以外の値)は通知OFF                |
